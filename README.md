# RoutingTask
## Запуск проекта
```bash
git clone <this repo>
cd RoutingTask
docker run --rm -v `pwd`/data:/data yaroslaver/routing-task:latest
```
## Задача
Написать программу, которая выполняет следующие действия:
1. Генерирует случайным образом N валидных подсетей (т.е. “a.b.c.d/prefix”). N – настраиваемый параметр.
2. Для произвольного заданного IPv4 адреса «выбирает лучший маршрут» из получившегося набора подсетей, т.е. выбирает из них самую узкую подсеть, в которую попадает заданный адрес.
## Входные данные
Входные данные должны быть записаны в файл **data/in.txt** в следующем виде:
```bash
cat data/in.txt
10
1.2.3.4
```
В первой строке распологается число *N* - количество подсетей для генерации. 

Во второй строке *IPv4* адрес, для которого выбирается лучший маршрут.

## Выходные данные
Программа записывает результат в выходной файл **out.txt** в формате:
```bash
cat data/out.txt
1.2.3.4
1.2.3.0/24
```
В первой строке *IPv4* адрес, для которого был выбран лучший маршрут.

Во второй строке самая узкая подсеть, в которую попадает заданный адрес. Если не нашлось ни одного подходящей подсети, то в выходной файл будет записано *default gateway*.


Программа записывает набор сгенерированных в ходе своей работы подсетей в выходной файл autogen.txt. Пример:
```bash
cat data/autogen.txt
10.20.0.0/16
1.2.3.0/24
```
## Дополнительно
Было добавлено 40 юнит тестов для проекта. Запустить их можно следующей командой при наличии установленного модуля pytest:
```bash
pytest src/
```
Для удобства был выстроен простейший вариант CI с использованием Jenkins. 

Jenkins вытягивает образ из моего публичного dockerHub, в котором установлен python 3 версии с модулем pytest на базе GNU/Linux. Каждый 5 минут ведется проверка репозитория gitHub на наличие изменений, если таковы присутствуют, то запускается контейнер с тестами и новейшей версией программы.

## Комментарии
Broadcast addresses и Network addresses просто пропускаются, маршрут для них не находится.

Non-routable addresses учавствуют в поиске маршрута.

Генерируются подсети с префиксом, значения которого принадлежат отрезку **[0; 30]**. При префиксе 31 и 32 количество хостовых машин равно 0, поэтому нет смысла брать их в расчет.

Проблема множественных подходящих маршрутов решена.